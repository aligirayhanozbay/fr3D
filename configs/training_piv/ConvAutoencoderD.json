{
    "model": {
	"levels": 4,
	"base_filters": 40,
	"kernel_size": 3,
	"activation": "leaky_relu",
	"final_activation": "sigmoid",
	"normalization": "batchnorm",
	"pre_activation": true,
	"residual_connection": true,
	"blocks_per_level": 4,
	"pool_size": 2
    },
    "training": {
	"epochs": 200,
	"validation_steps": 30,
	"ae_reduce_lr": {"patience": 15, "verbose": true, "min_lr": 1e-6, "monitor": "loss_AE"},
	"le_reduce_lr": {"patience": 15, "verbose": true, "min_lr": 1e-6, "monitor": "loss_LE"},
	"model_checkpoint": {"save_best_only": true, "monitor": "val_mae_LE"},
	"loss": "mse",
	"metrics": ["mae"],
	"ae_optimizer": {
		"class_name": "adam",
		"config": {
			"learning_rate": 1e-4
		}
	},
	"l_optimizer": {
		"class_name": "adam",
		"config": {
			"learning_rate": 1e-4
		}
	},
	"latent_space_step_ratio": 1
    },
    "dataset": {
	"batch_size": 16,
	"train_test_split": [0.80,0.20],
	"training_node": "zip_input_output",
	"evaluation_node": "zip_input_output_normparams",
	"node_configurations": [
	    {
		"nodetype": "HDF5IODataset",
		"identifier": "xy",
		"field": "xy-rear"
	    },
	    {
		"nodetype": "HDF5IODataset",
		"identifier": "xz",
		"field": "xz-rear"
	    },
	    {
		"nodetype": "HDF5IODataset",
		"identifier": "full_field",
		"field": "full_field"
	    },
	    {
		"nodetype": "zip",
		"identifier": "xy-ff-prenorm",
		"inputs": ["xy", "full_field"]
	    },
	    {
		"nodetype": "normalize",
		"identifier": "normalize-xy",
		"inputs": ["xy-ff-prenorm"],
		"normalization_spec": {
		    "method": "minmax",
		    "source": "target",
		    "axis": [-2,-3,-4],
		    "return_parameters": true
		}
	    },
	    {
		"nodetype": "take",
		"identifier": "take-xy",
		"take_idx": 0,
		"inputs": ["normalize-xy"]
	    },
	    {
		"nodetype": "keep_vars",
		"identifier": "keepvars-xy",
		"vars_to_keep": ["u", "v", "w"],
		"inputs": ["take-xy"]
	    },
	    {
		"nodetype": "zip",
		"identifier": "xz-ff-prenorm",
		"inputs": ["xz", "full_field"]
	    },
	    {
		"nodetype": "normalize",
		"identifier": "normalize-xz",
		"inputs": ["xy-ff-prenorm"],
		"normalization_spec": {
		    "method": "minmax",
		    "source": "target",
		    "axis": [-2,-3,-4],
		    "return_parameters": false
		}
	    },
	    {
		"nodetype": "take",
		"identifier": "take-xz",
		"take_idx": 0,
		"inputs": ["normalize-xz"]
	    },
	    {
		"nodetype": "keep_vars",
		"identifier": "keepvars-xz",
		"vars_to_keep": ["u", "v", "w"],
		"inputs": ["take-xz"]
	    },
	    {
		"nodetype": "zip",
		"identifier": "zip-input",
		"inputs": ["keepvars-xy", "keepvars-xz"]
	    },
	    {
		"nodetype": "concatenate",
		"identifier": "concat-input",
		"inputs": ["zip-input"],
		"axis": -1
	    },
	    {
		"nodetype": "squeeze",
		"identifier": "input",
		"inputs": ["concat-input"]
	    },
	    {
		"nodetype": "take",
		"identifier": "take-output",
		"take_idx": 1,
		"inputs": ["normalize-xy"]
	    },
	    {
		"nodetype": "keep_vars",
		"identifier": "output",
		"vars_to_keep": ["p"],
		"inputs": ["take-output"]
	    },
	    {
		"nodetype": "zip",
		"identifier": "zip_input_output",
		"inputs": ["input","output"]
	    },
	    {
		"nodetype": "take",
		"identifier": "take-normparams",
		"take_idx": 2,
		"inputs": ["normalize-xy"]
	    },
	    {
		"nodetype": "keep_vars",
		"identifier": "keepvars-normparams",
		"inputs": ["take-normparams"],
		"vars_to_keep": ["p"],
		"axis": -1
	    },
	    {
		"nodetype": "zip",
		"identifier": "zip_input_output_normparams",
		"inputs": ["input", "output", "keepvars-normparams"]
	    }
	]
    }
}
